define(["server","local-storage","constants","common","ckeditor","ckjquery"],function(a,b,c,d){return{init:function(){window.app.views.AdminAbout||(window.app.views.AdminAbout=Backbone.View.extend({initialize:function(a){this.about_data=a.about_data},render:function(){return document.title=$.i18n.t("admin.about-page.page-title"),this.$el.html(this.MainContainerTemplate({all_pages:c.LEFT_PANELS,album_types:c.ALBUM_TYPES,selected_page:c.LEFT_PANELS.about})),$(this.$el).find(".main").html(this.template({save_url:c.BASE_API_URL+c.API_METHODS.admin.about.url,data:this.about_data})),$(this.$el).find("textarea#description").ckeditor({language:c.APP_LANGUAGE}),this},events:{"click #submit-btn":"formSubmit","change #avatar-image":"fileChanged"},formSubmit:function(){var c=new FormData;return c.append("avatar_image",$("#avatar-image")[0].files[0]),c.append("description",$("#description").val()),c.append("Session-Token",b.getSession().session.token),a.submitAdminAbout(c,function(a){alert($.i18n.t("saved-message"))}),!1},fileChanged:function(){var a=$("#avatar-image")[0].files[0];if(d.isImage(a)){var b=$("#avatar-image")[0].files[0].size;if(b>c.MAX_UPLOADS_FILE_SIZE)$("#avatar-image").val(""),alert($.i18n.t("max-file-size-message")+c.MAX_UPLOADS_FILE_SIZE/1024/1024+$.i18n.t("mb-prefix"));else{var e=new FileReader;e.onload=function(a){$("#image").attr("src",a.target.result)},e.readAsDataURL($("#avatar-image")[0].files[0])}}else $("#avatar-image").val(""),alert($.i18n.t("supported-format-message")+c.SUPPORTED_IMAGES_FORMAT)}}))}}});